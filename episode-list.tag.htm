<xsl>
	<xsl:template match='*'>
		<img src='{//channel/image/url}' />
		<h1>
			<xsl:value-of select='//channel/title' />
		</h1>
		<p>
			<xsl:value-of select='//channel/description' />
		</p>



		<br />
		<xsl:for-each select='//item'>
			<card url='{*[starts-with(@url,"https:")]/@url}' on-tap='play'>
				<!-- <div class='date'>
					<span class='day'>29</span>
					<span class='month'>nov</span>
				</div> -->

				<h3>

					<xsl:value-of select='title' />
				</h3>
				<p>
					<xsl:value-of select='description' />
				</p>
				<!-- <a>
					<xsl:value-of select='*[starts-with(@url,"https:")]/@url' />
				</a> -->
				<!-- <i>
					<xsl:value-of select='pubDate' />
				</i> -->
			</card>
		</xsl:for-each>
	</xsl:template>
</xsl>

<style>
	img {
		width: 100px;
	}

	a {
		color: gray;
		cursor: pointer;
	}
	i{font-size: 10px;}
	p{font-size:14px; text-align: justify; margin: .2em 0;}
h3{margin:0; padding:0;font-size: 17px; text-align: justify;}
#player{
	position: fixed;
	bottom:0;
	background: #000;
	width: 50%;
	padding: 1rem;
}

	card {
		display: block;
		margin: .5rem;
		padding: .5rem;
		background: #333;
		/* clear: both;; */
	}

	card:hover {
		background: #444;
		cursor: pointer;
	}
	/* .date{float:left;height:100%} */
</style>

<script>
	class {
		async $onReady() {
			this.$data = await fetch(`https://podcasts.files.bbci.co.uk/p02nq0gn.rss`).then(x => x.text())
			console.log('data', this.$data)
		}
		play(node) {
			let url = node.getAttribute('url')
			// console.log('play', url)
			this.$event('play',{url})
			// let player = this.$view.Q('audio', 1);
			// player.innerHTML = `<source src="${url}" type="audio/mpeg" />`;
			// player.load()
			// player.play();
			// let src = this.$view.Q('audio>source', 1);
			// console.log('src', src)
			// src.setAttribute('src', url)
			// this.$view.Q('audio', 1).play()
		}
	}
</script>